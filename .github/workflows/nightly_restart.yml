name: Nattlig restart
on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 * * *'

jobs:
  deploy_dev-sbs:
    uses: navikt/sosialhjelp-veiviser-ny/.github/workflows/build_and_deploy_dev.yml@master
    with:
      config-file-name: dev-sbs
      cluster: dev-sbs
    secrets:
      api_deploy_token: ${{ secrets.NAIS_DEPLOY_APIKEY }}
      sentry_auth_token: ${{ secrets.SENTRY_AUTH_TOKEN }}
  deploy_dev-sbs-intern:
    uses: navikt/sosialhjelp-veiviser-ny/.github/workflows/build_and_deploy_dev.yml@master
    with:
      config-file-name: dev-sbs-intern
      cluster: dev-sbs
    secrets:
      api_deploy_token: ${{ secrets.NAIS_DEPLOY_APIKEY }}
      sentry_auth_token: ${{ secrets.SENTRY_AUTH_TOKEN }}
  deploy_dev-gcp:
    uses: navikt/sosialhjelp-veiviser-ny/.github/workflows/build_and_deploy_dev.yml@master
    with:
      config-file-name: dev-gcp
      cluster: dev-gcp
    secrets:
      api_deploy_token: ${{ secrets.NAIS_DEPLOY_APIKEY }}
      sentry_auth_token: ${{ secrets.SENTRY_AUTH_TOKEN }}
  deploy_labs-gcp:
    uses: navikt/sosialhjelp-veiviser-ny/.github/workflows/build_and_deploy_dev.yml@master
    with:
      config-file-name: labs-gcp
      cluster: labs-gcp
    secrets:
      api_deploy_token: ${{ secrets.NAIS_DEPLOY_APIKEY }}
      sentry_auth_token: ${{ secrets.SENTRY_AUTH_TOKEN }}